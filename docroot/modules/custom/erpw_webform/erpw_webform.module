<?php

use Drupal\Core\Form\FormStateInterface;

/**
 * @file
 * Contains erpw_webform.module.
 */


/**
 * Implements hook_webform_add_form().
 */
 function erpw_webform_webform_add_form(array &$form, FormStateInterface $form_state, $webform_type = NULL) {
  // Load the appropriate webform template.
  if ($webform_type == 'default') {
    $webform = \Drupal\webform\Entity\Webform::create([]);
  }
  elseif ($webform_type == 'eRPW') {
    $webform = \Drupal\webform\Entity\Webform::create([
      'template' => 'template_erpw_workflow',
    ]);
  }
  
  // Set the webform values.
  $form_state->set('webform', $webform);
  $form_state->set('template', $webform->get('template')->value);
  
  // Build the webform form.
  $form_object = \Drupal::entityTypeManager()
    ->getFormObject('webform', 'default')
    ->setEntity($webform);
  $form = \Drupal::formBuilder()->getForm($form_object);
  
  return $form;
}
